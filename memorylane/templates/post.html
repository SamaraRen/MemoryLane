<!DOCTYPE html>
<html lang="en">

{% load staticfiles %}
{% include 'head.html' %}
<head>
    <!--script>
    function initMap() {
      var map = new google.maps.Map(document.getElementById('map'), {
        center: {lat: -33, lng: 151.196},
        zoom: 15
      });

      var infowindow = new google.maps.InfoWindow();
      var service = new google.maps.places.PlacesService(map);

      service.getDetails({
        placeId: 'ChIJN1t_tDeuEmsRUsoyG83frY4'
      }, function(place, status) {
        if (status === google.maps.places.PlacesServiceStatus.OK) {
          var marker = new google.maps.Marker({
            map: map,
            position: place.geometry.location
          });
          google.maps.event.addListener(marker, 'click', function() {
            infowindow.setContent(place.name);
            infowindow.open(map, this);
          });
        }
      });
    }

    </script-->
    <script>
     var geocoder;
  var map;
  function initialize() {
    var map = new google.maps.Map(document.getElementById('mapContainer'), {
    zoom: 8,
    center: {lat: -34.397, lng: 150.644},
    styles: [{"featureType":"all","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"administrative","elementType":"all","stylers":[{"visibility":"off"},{"color":"#efebe2"}]},{"featureType":"landscape","elementType":"all","stylers":[{"color":"#efebe2"}]},{"featureType":"poi","elementType":"all","stylers":[{"color":"#efebe2"}]},{"featureType":"poi.attraction","elementType":"all","stylers":[{"color":"#efebe2"}]},{"featureType":"poi.business","elementType":"all","stylers":[{"color":"#efebe2"}]},{"featureType":"poi.government","elementType":"all","stylers":[{"color":"#dfdcd5"}]},{"featureType":"poi.medical","elementType":"all","stylers":[{"color":"#dfdcd5"}]},{"featureType":"poi.park","elementType":"all","stylers":[{"color":"#bad294"}]},{"featureType":"poi.place_of_worship","elementType":"all","stylers":[{"color":"#efebe2"}]},{"featureType":"poi.school","elementType":"all","stylers":[{"color":"#efebe2"}]},{"featureType":"poi.sports_complex","elementType":"all","stylers":[{"color":"#efebe2"}]},{"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#ffffff"}]},{"featureType":"road.highway","elementType":"geometry.stroke","stylers":[{"visibility":"off"}]},{"featureType":"road.arterial","elementType":"geometry.fill","stylers":[{"color":"#ffffff"}]},{"featureType":"road.arterial","elementType":"geometry.stroke","stylers":[{"visibility":"off"}]},{"featureType":"road.local","elementType":"geometry.fill","stylers":[{"color":"#fbfbfb"}]},{"featureType":"road.local","elementType":"geometry.stroke","stylers":[{"visibility":"off"}]},{"featureType":"transit","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"water","elementType":"all","stylers":[{"color":"#a5d7e0"}]}]
  });
  var geocoder = new google.maps.Geocoder();
    codeAddress(geocoder, map);
  }

  function codeAddress(geocoder, map) {
    geocoder.geocode( {'address':"{{memory.location}}"}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }

    </script>
    <style>
        .gmnoprint, .gm-style-cc {
            display: none;
        }
    </style>
</head>

<body>
    <nav class="flex">
        <div class="username">
            <a href="/profile-mod/">
                <h1><i class="fa fa-user"></i> <span>matthew_ong</span></h1>
            </a>
        </div>
        <div class="middleLogo">
            <a href="/timeline/">
                <img src="{% static "img/ml-mod.png" %}" alt="logo" id="middleLogo">
            </a>
        </div>
        <div class="settings flex">
            <div class="search">
                <input placeholder="Search &#xf002;">
            </div>
            <a href="/settings/"><i class="fa fa-cog"></i></a>
        </div>
    </nav>
    <!-- div to hold all elements of a single timeline post -->
    <div class="single-post">
        <!-- div to hold panaroma shot and top bar(title and date) -->
    <div class = "panoramaElement">
        <div class="panoramaHeader flex">
            <p class="panoramaLeft">{{memory.name}}</p>
            <p class="panoramaRight">{{memory.date_created}}</p>
    </div>
        <img src="{{image}}" class="panoramaResize">        
        <div class="content">
            <p class="textRemember">I remember...</p>
            <p class="textBody">
            {{memory.description}}
            </p>
        </div>
            <div id="sidebar" class="flex sticky">
                <div class="map">
                    <div class="map" id="mapContainer">
                        {#% load easy_maps_tags %#}
                        <!-- Default map with 300x400 dimensions -->
                        {#% easy_map '{{memory.location}}' 300 400 %#}
                        {#% load easy_maps_tags cache %#}
                        {#% cache 600 my_map firm.address %#}
                            {#% easy_map firm.address 300 400 %#}
                        {#% endcache %#}
                    </div>
                    <div class="location">
                        <h2><i class="fa fa-map-marker"></i>{{memory.location}}</h2>
                    </div>
                </div>
                <p class="textWith">with...</p>
                <div class="group flex friends">
                    <a class="thumb" href="/profile-mod/"><div style="background-image: url({% static "img/preska.jpg" %})"><img class="overlay" src="{% static "img/overlay.png" %}"><span class="name">Preska</span></div></a>
                    <a class="thumb" href="/profile-mod/"><div style="background-image: url({% static "img/samara.jpg" %})"><img class="overlay" src="{% static "img/overlay.png" %}"><span class="name">Samara</span></div></a>
                    <a class="thumb" href="/profile-mod/"><div style="background-image: url({% static "img/zak.jpg" %})"><img class="overlay" src="{% static "img/overlay.png" %}"><span class="name">Zak</span></div></a>
                    <a class="thumb" href="/profile-mod/"><div style="background-image: url({% static "img/aneesh.jpg" %})"><img class="overlay" src="{% static "img/overlay.png" %}"><span class="name">Aneesh</span></div></a>
                </div>
            </div>
        </div>
        <br>
    </div>
    <script
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC63gKI9GdSMMPoXZq-hGwAv82CDIAfD8M&signed_in=true&libraries=places&callback=initialize" async defer></script>


    <script>
        //$(function(){ // document ready
        if (!!$('.sticky').offset()) { // make sure ".sticky" element exists
        var stickyTop = $('.sticky').offset().top; // returns number 
        $(window).scroll(function(){ // scroll event
        var windowTop = $(window).scrollTop(); // returns number 
        if (stickyTop < windowTop-240){
            $('.sticky').css({ position: 'fixed', top: '0', width: '34.5%', right: '6.95%'});
        }else{
            $('.sticky').css({ position: 'static', width: '40%'});
            }
        });}
        });
    </script>
</body>
</html>